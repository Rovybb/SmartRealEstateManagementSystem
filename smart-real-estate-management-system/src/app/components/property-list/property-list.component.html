<div class="property-management-container">
  <app-navbar-home></app-navbar-home>
  <div class="property-management-content">
    <h1>Property List</h1>
    <button (click)="navigateToCreate()">Create New Property</button>

    <div class="search-section">
      <form (ngSubmit)="applyFilters()" #filterForm="ngForm">
        <label for="title"><fa-icon [icon]="faMagnifyingGlass"></fa-icon></label>
        <input
          type="text"
          id="title"
          [(ngModel)]="filters['title']"
          name="title"
        />
      </form>
      <div class="filter-container">
        <label for="description">Description</label>
        <input
          type="text"
          id="description"
          [(ngModel)]="filters['description']"
          name="description"
        />
        <label for="price_min">Min Price</label>
        <input
          type="number"
          id="price_min"
          [(ngModel)]="filters['price_min']"
          name="price_min"
        />
        <label for="price_max">Max Price</label>
        <input
          type="number"
          id="price_max"
          [(ngModel)]="filters['price_max']"
          name="price_max"
        />
        <button type="submit">Apply Filters</button>
        <button type="button" (click)="resetFilters()">Reset</button>
      </div>
    </div>

    <table class="tableAllProperties">
      <thead>
        <tr>
          <th>Title</th>
          <th>Description</th>
          <th>Type</th>
          <th>Status</th>
          <th>Price</th>
          <th>Area</th>
          <th class="actions-column">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let property of properties">
          <td>{{ property.title }}</td>
          <td>{{ property.description }}</td>
          <td>{{ property.type }}</td>
          <td>{{ property.status }}</td>
          <td>{{ property.price }}</td>
          <td>{{ property.area }}</td>
          <td>
            <button (click)="viewDetails(property)" class="btn-view-details">
              View All Details
            </button>
          </td>
        </tr>
      </tbody>
    </table>

    <div class="pagination-controls">
      <button (click)="previousPage()" [disabled]="pageNumber === 1">
        <fa-icon [icon]="faArrowLeft"></fa-icon>
      </button>
      <button
        *ngFor="let page of [].constructor(totalPages); let i = index"
        [class.active]="i + 1 === pageNumber"
        (click)="goToPage(i + 1)"
      >
        {{ i + 1 }}
      </button>
      <button (click)="nextPage()" [disabled]="pageNumber === totalPages">
        <fa-icon [icon]="faArrowRight"></fa-icon>
      </button>
    </div>
  </div>
</div>
